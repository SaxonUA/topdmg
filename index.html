<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>WOT Max Damage Platoon</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
    background:transparent!important;
    font-family:'Segoe UI','Roboto','Arial Narrow Bold',sans-serif;
    color:#fff;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    min-height:100vh;
    padding:10px;
    gap:30px
}

/* === –û–°–ù–û–í–ù–Ü –ë–õ–û–ö–ò ‚Äî –ü–†–û–ó–û–†–Ü, –ë–ï–ó –†–ê–ú–û–ö –Ü –¢–Ü–ù–ï–ô === */
.widget{
    width:680px;
    background:rgba(20,20,35,.55); /* üîπ –ø—Ä–æ–∑–æ—Ä–∏–π —Ñ–æ–Ω */
    backdrop-filter:blur(6px);
    border-radius:18px;
    padding:18px 22px;
    border:none;            /* ‚ùå —Ä–∞–º–∫–∞ */
    box-shadow:none;        /* ‚ùå —Ç—ñ–Ω—å */
    position:relative;
    overflow:hidden;
}

/* ‚ùå –ø—Ä–∏–±—Ä–∞–Ω–æ –∫–æ–ª—å–æ—Ä–æ–≤—É –ª—ñ–Ω—ñ—é */
.widget::before{display:none}

.header{text-align:center;margin-bottom:20px}

.title{
    font-size:2.6rem;
    font-weight:900;
    color:#ffd166;
    letter-spacing:2px;
    text-transform:uppercase;
}

/* === –ì–†–ê–í–¶–Ü === */
.players-container{
    display:grid;
    grid-template-columns:1fr 46px 1fr;
    gap:18px;
}

.player-card{
    background:rgba(15,15,30,.55); /* –ø—Ä–æ–∑–æ—Ä–æ */
    border-radius:16px;
    padding:18px;
    border:none;
    box-shadow:none;
    display:flex;
    flex-direction:column;
}

.player-header{
    display:flex;
    align-items:center;
    justify-content:center;
    gap:14px;
    margin-bottom:12px;
}

.player-avatar{
    width:54px;height:54px;
    border-radius:50%;
    background:linear-gradient(135deg,#2a2a4a,#1a1a2e);
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:1.6rem;
    color:#ffd166;
    border:1px solid rgba(255,255,255,.15);
    background-size:cover;
    background-position:center;
}

.player-info h2{
    font-size:2.5rem;
    font-weight:900;
    white-space:nowrap;
}

.damage-section{
    text-align:center;
    margin:10px 0 18px;
}

.damage-label{
    font-size:1.1rem;
    color:#9be7d8;
    text-transform:uppercase;
    font-weight:900;
    display:flex;
    justify-content:center;
    gap:8px;
}

.damage-value{
    font-size:4.6rem;
    font-weight:900;
    color:#ff7a00;
    line-height:1;
}

/* === –°–¢–ê–¢–ò –ì–†–ê–í–¶–Ø === */
.stat-item{
    background:rgba(10,10,25,.55);
    border-radius:12px;
    padding:16px;
    text-align:center;
    border:none;
    box-shadow:none;
}

.stat-label{
    font-size:1rem;
    color:#9be7d8;
    font-weight:800;
    display:flex;
    justify-content:center;
    gap:8px;
    text-transform:uppercase;
}

.stat-value{
    font-size:3rem;
    font-weight:900;
    color:#ffd166;
}

/* VS */
.vs-container{
    display:flex;
    align-items:center;
    justify-content:center;
}

.vs{
    width:38px;height:38px;
    border-radius:50%;
    background:rgba(255,255,255,.12);
    display:flex;
    align-items:center;
    justify-content:center;
    color:#06d6a0;
    font-weight:900;
}

/* === –°–¢–ê–¢–ò–°–¢–ò–ö–ê –í–ó–í–û–î–£ === */
.platoon-stats{
    background:rgba(20,20,35,.55);
    border-radius:16px;
    padding:18px;
    border:none;
    box-shadow:none;
}

.platoon-stats h3{
    color:#06d6a0;
    margin-bottom:14px;
    display:flex;
    gap:8px;
    align-items:center;
}

.stats-grid{
    display:grid;
    grid-template-columns:repeat(4,1fr);
    gap:12px;
}

.stat-card{
    background:rgba(10,10,25,.55);
    border-radius:12px;
    padding:16px 10px;
    text-align:center;
    border:none;
    box-shadow:none;
}

.stat-card .value{
    font-size:2.3rem;
    font-weight:900;
    color:#ffd166;
}

.stat-card .label{
    font-size:.85rem;
    color:#cbd5e1;
    text-transform:uppercase;
}
</style>
</head>

<body>

<!-- üî• –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–ò–ô –ü–û–°–¢–†–Ü–õ -->
<div class="widget">
    <div class="header"><div class="title">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π –ü–æ—Å—Ç—Ä—ñ–ª</div></div>

    <div class="players-container">

        <div class="player-card">
            <div class="player-header">
                <div class="player-avatar" style="background-image:url('https://saxonua.github.io/site/logo.png')"></div>
                <div class="player-info"><h2>SaXon</h2></div>
            </div>
            <div class="damage-section">
                <div class="damage-label"><i class="fas fa-crosshairs"></i>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π –ø–æ—Å—Ç—Ä—ñ–ª</div>
                <div class="damage-value" id="p1_shot">0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label"><i class="fas fa-bolt"></i>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ —à–∫–æ–¥–∞</div>
                <div class="stat-value" id="p1_max_damage">0</div>
            </div>
        </div>

        <div class="vs-container"><div class="vs">VS</div></div>

        <div class="player-card">
            <div class="player-header">
                <div class="player-avatar"><i class="fas fa-helmet-battle"></i></div>
                <div class="player-info"><h2>Devil</h2></div>
            </div>
            <div class="damage-section">
                <div class="damage-label"><i class="fas fa-crosshairs"></i>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π –ø–æ—Å—Ç—Ä—ñ–ª</div>
                <div class="damage-value" id="p2_shot">0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label"><i class="fas fa-bolt"></i>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ —à–∫–æ–¥–∞</div>
                <div class="stat-value" id="p2_max_damage">0</div>
            </div>
        </div>

    </div>
</div>

<!-- üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –í–ó–í–û–î–£ -->
<div class="widget">
    <div class="platoon-stats">
        <h3><i class="fas fa-users"></i> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∑–≤–æ–¥—É</h3>
        <div class="stats-grid">
            <div class="stat-card"><div class="value" id="total_battles">0</div><div class="label">–ë–æ—ó</div></div>
            <div class="stat-card"><div class="value" id="win_rate">0%</div><div class="label">Winrate</div></div>
            <div class="stat-card"><div class="value" id="total_damage">0</div><div class="label">–ó–∞–≥–∞–ª—å–Ω–∞ —à–∫–æ–¥–∞</div></div>
            <div class="stat-card"><div class="value" id="total_platoon_frags">0</div><div class="label">–ö-—Ç—å —Ñ—Ä–∞–≥—ñ–≤</div></div>
        </div>
    </div>
</div>

<script>
const SHEET_ID="17phnEn-NW-OnrZg4DcW65r-Xoq6ScsdVjS5yL0SS3fk";
const GID_STATS="506446790";
const GID_SHOT="1558487510";

const URL_STATS=`https://docs.google.com/spreadsheets/d/${SHEET_ID}/export?format=csv&gid=${GID_STATS}`;
const URL_SHOT=`https://docs.google.com/spreadsheets/d/${SHEET_ID}/export?format=csv&gid=${GID_SHOT}`;

const csv=t=>t.replace(/\r/g,"").split("\n").filter(Boolean).map(r=>r.split(","));
const n=v=>parseInt(String(v).replace(/[^\d]/g,""))||0;

async function loadShot(){
    const d=csv(await (await fetch(URL_SHOT+"&_="+Date.now())).text());
    if(d[1]){
        p1_shot.textContent=n(d[1][4]).toLocaleString();
        p2_shot.textContent=n(d[1][5]).toLocaleString();
    }
}

async function loadStats(){
    const d=csv(await (await fetch(URL_STATS+"&_="+Date.now())).text());
    let b=0,w=0,td=0,tf=0,m1=0,m2=0;
    for(let i=1;i<d.length;i++){
        const r=d[i]; if(!r||r.length<9)continue;
        const d1=n(r[3]),d2=n(r[4]),f1=n(r[5]),f2=n(r[6]),win=n(r[8]);
        m1=Math.max(m1,d1); m2=Math.max(m2,d2);
        td+=d1+d2; tf+=f1+f2; b++; if(win===1)w++;
    }
    p1_max_damage.textContent=m1.toLocaleString();
    p2_max_damage.textContent=m2.toLocaleString();
    total_battles.textContent=b;
    win_rate.textContent=b?((w/b)*100).toFixed(1)+"%":"0%";
    total_damage.textContent=td.toLocaleString();
    total_platoon_frags.textContent=tf;
}

function refresh(){loadShot();loadStats()}
refresh();
setInterval(refresh,15000);
</script>

</body>
</html>
